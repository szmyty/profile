# Dashboard Cards

This document describes the SVG dashboard cards generated by the profile automation system.

## Overview

The system generates five distinct dashboard cards, each displaying different personal metrics. All cards share a consistent dark theme and visual language.

## Card Types

### Location Card

**File**: `location/location-card.svg`  
**Dimensions**: 480√ó400 pixels  
**Schedule**: Daily at 6 AM UTC  
**Workflow**: `location-card.yml`

Displays the user's location with an embedded static map from OpenStreetMap.

**Features**:
- Static map image (embedded as base64)
- Location name and coordinates
- Automatic geocoding from GitHub profile

**Data Source**:
- GitHub API for user location
- Nominatim for geocoding
- OpenStreetMap for static map tiles

---

### Weather Card

**File**: `weather/weather-today.svg`  
**Dimensions**: 480√ó230 pixels  
**Schedule**: Daily at 7 AM UTC  
**Workflow**: `weather.yml`

Shows current weather conditions and a 3-day forecast.

**Features**:
- Current temperature with weather emoji
- Weather condition description
- High/low temperatures
- 3-day forecast with icons
- Dynamic gradient based on weather condition

**Data Source**:
- Open-Meteo API (no API key required)
- WMO weather code mapping for conditions

**Weather Code Categories**:
| Codes | Condition | Emoji |
|-------|-----------|-------|
| 0 | Clear sky | ‚òÄÔ∏è |
| 1-3 | Partly cloudy | üå§Ô∏è |
| 45-48 | Fog | üå´Ô∏è |
| 51-67 | Rain/Drizzle | üåßÔ∏è |
| 71-77 | Snow | ‚ùÑÔ∏è |
| 80-99 | Thunderstorm | ‚õàÔ∏è |

---

### SoundCloud Card

**File**: `assets/soundcloud-card.svg`  
**Dimensions**: 480√ó144 pixels  
**Schedule**: Every 6 hours  
**Workflow**: `soundcloud-card.yml`

Displays the latest track from a SoundCloud profile.

**Features**:
- Track artwork (embedded as base64)
- Track title and artist
- Duration and play count
- SoundCloud branding with orange accent
- Clickable link to track

**Data Source**:
- SoundCloud public API
- Artwork from track metadata

---

### Health Dashboard

**File**: `oura/health_dashboard.svg`  
**Dimensions**: 480√ó365 pixels  
**Schedule**: Every 6 hours  
**Workflow**: `oura.yml`

Comprehensive health metrics dashboard from Oura Ring data.

**Features**:
- Three main score panels:
  - Sleep Score (blue gradient)
  - Readiness Score (green gradient)
  - Activity Score (pink gradient)
- Heart rate sparkline with current BPM
- HRV (Heart Rate Variability) display
- Body metrics (temperature deviation, weight, BMI)
- Update timestamp

**Score Panel Layout**:
```
+------------------+------------------+------------------+
|   üí§ Sleep       |   ‚ö° Readiness    |   üèÉ Activity    |
|      85          |       78         |        72        |
| 7h 23m duration  | Body temp +0.2¬∞  |  8,432 steps    |
| 89% efficiency   | Avg HR 62        |  1,234 cal      |
+------------------+------------------+------------------+
```

**Data Source**:
- Oura API v2 (requires PAT token)
- Aggregated daily summaries

---

### Mood Dashboard

**File**: `oura/mood_dashboard.svg`  
**Dimensions**: 480√ó250 pixels  
**Schedule**: Every 6 hours  
**Workflow**: `oura.yml`

Displays computed mood state based on Oura health metrics.

**Features**:
- Dynamic mood icon (emoji-based)
- Mood category with description
- Contributing factors:
  - Sleep quality assessment
  - Recovery status
  - Energy level
  - Stress indicators
- Mood score (0-100)
- Dynamic gradient based on mood category

**Mood Categories**:
| Category | Score Range | Gradient |
|----------|-------------|----------|
| Excellent | 85-100 | Green to Teal |
| Good | 70-84 | Blue to Cyan |
| Fair | 50-69 | Yellow to Orange |
| Low | 0-49 | Red to Orange |

**Mood Computation**:
The mood engine (`scripts/oura_mood_engine.py`) computes the mood score as a weighted average:
- Sleep score (30%)
- Readiness score (30%)
- Activity score (15%)
- HRV (10%)
- Temperature deviation (10%)
- Resting HR inverted (5%) ‚Äî calculated as `(100 - resting_hr) * 0.05`, so lower heart rate contributes more positively to the score

---

## Visual Consistency

### Shared Elements

All cards include:
1. **Background gradient**: Dark gradient from top-left to bottom-right
2. **Border**: Subtle accent-colored stroke at 30% opacity
3. **Decorative accent**: 4px vertical bar on the right side
4. **Footer**: Muted timestamp showing last update
5. **Border radius**: 12px rounded corners

### Color Usage

| Element | Color |
|---------|-------|
| Background | `#1a1a2e` ‚Üí `#16213e` |
| Primary text | `#ffffff` |
| Secondary text | `#8892b0` |
| Accent/highlights | `#64ffda` |
| Muted text | `#4a5568` |

### Typography

- **Headers**: 14-18px, white
- **Body text**: 10-12px, white or secondary
- **Labels**: 9-10px, muted
- **Scores**: 24-36px, white with glow filter

## Card Configuration

Cards are configured in `config/theme.json`:

```json
{
  "cards": {
    "widths": {
      "soundcloud": 480,
      "weather": 480,
      "mood": 480,
      "health_dashboard": 480,
      "location": 480
    },
    "heights": {
      "soundcloud": 144,
      "weather": 230,
      "mood": 250,
      "health_dashboard": 365,
      "location": 400
    }
  }
}
```

## Adding New Cards

To add a new card type:

1. **Create fetch script**: `scripts/fetch-newcard.sh`
2. **Create generator**: `scripts/generate-newcard.py`
3. **Add to theme**: Define dimensions in `config/theme.json`
4. **Create workflow**: `.github/workflows/newcard.yml`
5. **Add README marker**: `<!-- NEWCARD-CARD:START --><!-- NEWCARD-CARD:END -->`

Example generator using CardBase:

```python
#!/usr/bin/env python3
from lib.card_base import CardBase

class NewCard(CardBase):
    def __init__(self):
        super().__init__("newcard")
    
    def generate_content(self) -> str:
        font_family = self.get_typography("font_family")
        return f'''
          <text x="20" y="40" 
                font-family="{font_family}" 
                fill="{self.get_color('text', 'primary')}">
            New Card Content
          </text>
        '''

if __name__ == "__main__":
    card = NewCard()
    svg = card.generate_svg(footer_text="Updated today")
    card.write_svg("output.svg", svg)
```

## SVG Optimization

All generated SVGs are optimized using SVGO before committing:

```bash
svgo card.svg -o card.svg
```

This typically reduces file size by 10-30% without visual changes.
